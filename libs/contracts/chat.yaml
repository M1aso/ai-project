openapi: 3.1.0
info:
  title: Chat API
  version: 0.2.0
servers:
  - url: http://api.45.146.164.70.nip.io
    description: Development server
paths:
  /healthz:
    get:
      summary: Health check
      responses:
        '200':
          description: OK
  /ws:
    get:
      summary: WebSocket handshake for chat
      parameters:
        - in: query
          name: token
          required: true
          schema:
            type: string
        - in: query
          name: roomId
          required: true
          schema:
            type: string
      responses:
        '101':
          description: Switching Protocols
  /api/chats/{chatId}/messages:
    get:
      summary: Message history
      parameters:
        - in: path
          name: chatId
          required: true
          schema:
            type: string
        - in: query
          name: limit
          schema:
            type: integer
            default: 50
        - in: query
          name: offset
          schema:
            type: integer
            default: 0
      responses:
        '200':
          description: OK
  /api/chats/search:
    get:
      summary: Search chats by name
      parameters:
        - in: query
          name: q
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
  /api/chats/presence/{userId}:
    get:
      summary: Get presence for a user
      parameters:
        - in: path
          name: userId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  online:
                    type: boolean
